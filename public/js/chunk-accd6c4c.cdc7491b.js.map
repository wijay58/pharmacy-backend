{"version":3,"sources":["webpack:///./src/views/Cashier.vue?3f18","webpack:///src/views/Cashier.vue","webpack:///./src/views/Cashier.vue?ab7b","webpack:///./src/views/Cashier.vue","webpack:///./src/views/Cashier.vue?9d88"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","directives","name","rawName","value","expression","domProps","on","$event","search","target","composing","searchField","_l","searchResult","index","key","staticStyle","_v","_s","medicine","storage","size","unit","short_name","remaining_quantity","addtoCart","recieptFor","cartItem","class","selected","selectingFunc","getQtyFunction","getQty","getPrice","remove","options","changeMethod","model","callback","$$v","method","total","clearCart","submit","staticRenderFns","data","searchResults","price","Number","cart","localCart","row","created","window","addEventListener","e","mounted","getData","$route","params","console","log","customer","firstname","methods","$http","preventDefault","formData","_id","list","user","sessionStorage","getItem","$swal","fire","items","getname","exist","split","qty","action","parseInt","item","Remainingqty","parseFloat","selling_price","given","current","difference","length","cartFunction","id","push","element","component"],"mappings":"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","file":"js/chunk-accd6c4c.cdc7491b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('CRow',[_c('CCol',{attrs:{\"md\":\"8\"}},[_c('CCard',{staticClass:\"card-style\"},[_c('CCardBody',[_c('div',[_c('div',{staticClass:\"input-group mb-2\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchField),expression:\"searchField\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"Search for a medicine...\",\"aria-label\":\"Search for...\"},domProps:{\"value\":(_vm.searchField)},on:{\"keyup\":function($event){return _vm.search()},\"input\":function($event){if($event.target.composing){ return; }_vm.searchField=$event.target.value}}})])]),_c('CCardBody',[_c('CRow',{staticClass:\"justify-content-between\"},_vm._l((_vm.searchResults),function(searchResult,index){return _c('div',{key:index,staticClass:\"card mb-3\",staticStyle:{\"max-width\":\"30%\",\"min-width\":\"30%\"},attrs:{\"md\":\"6\"}},[_c('div',{staticClass:\"card-body\"},[_c('h4',{staticClass:\"card-title\"},[_vm._v(\" \"+_vm._s(searchResult.medicine.name)+\" \")]),_c('CListGroup',[_c('CListGroupItem',[_vm._v(_vm._s(searchResult.storage))]),_c('CListGroupItem',[_vm._v(_vm._s(searchResult.medicine.size + searchResult.medicine.unit.short_name))]),_c('CListGroupItem',[_vm._v(_vm._s(searchResult.remaining_quantity))])],1)],1),_c('div',{staticClass:\"bg-transparent\"},[_c('CButton',{staticClass:\"col\",attrs:{\"variant\":\"outline\",\"color\":\"success\"},on:{\"click\":function($event){return _vm.addtoCart(searchResult)}}},[_c('CIcon',{attrs:{\"name\":\"cil-cart\"}}),_vm._v(\" Add to Cart \")],1)],1)])}),0)],1)],1)],1)],1),_c('CCol',{attrs:{\"md\":\"4\"}},[_c('CCard',{staticStyle:{\"height\":\"55vh\",\"overflow-y\":\"auto\"},attrs:{\"id\":\"element-to-print\"}},[_c('CCardBody',[_c('CRow',{staticClass:\"d-flex justify-content-between\"},[_c('h4',{staticClass:\"card-title mb-0 ml-2\",attrs:{\"id\":\"traffic\"}},[_vm._v(\" Reciept \"+_vm._s(_vm.recieptFor)+\" \")])]),_c('hr',{staticStyle:{\"margin-top\":\"0px\"}}),_c('div',{staticClass:\"list-group list-group-flush\"},[_c('CRow',[_c('CCol',{staticStyle:{\"font-weight\":\"bold\"},attrs:{\"md\":\"6\"}},[_vm._v(\"Drug Name\")]),_c('CCol',{staticStyle:{\"font-weight\":\"bold\"},attrs:{\"md\":\"4\"}},[_vm._v(\"Quantity\")]),_c('CCol',{staticStyle:{\"font-weight\":\"bold\"},attrs:{\"md\":\"2\"}},[_vm._v(\"Amount(Rs.)\")])],1),_vm._l((_vm.localCart),function(cartItem,index){return _c('CRow',{key:index,staticClass:\"list-group-item justify-content-between d-flex\",class:{ 'is-success': cartItem === _vm.selected },staticStyle:{\"padding\":\"5px 1px\"},on:{\"click\":function($event){return _vm.selectingFunc(cartItem)}}},[_c('CCol',{staticClass:\"text-left\",attrs:{\"md\":\"6\"}},[_c('span',[_vm._v(_vm._s(cartItem.name + \" \" + cartItem.size))])]),_c('CCol',{attrs:{\"md\":\"4\"}},[_c('span',[_c('CButton',{staticClass:\"p-0\",attrs:{\"color\":\"success\",\"shape\":\"pill\",\"variant\":\"outline\"},on:{\"click\":function($event){return _vm.getQtyFunction(cartItem, index, 'min')}}},[_c('CIcon',{staticStyle:{\"width\":\"1.5rem\"},attrs:{\"name\":\"cil-minus\"}})],1),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.getQty(cartItem)))]),_vm._v(\" \"),_c('CButton',{staticClass:\"p-0\",attrs:{\"color\":\"success\",\"shape\":\"pill\",\"variant\":\"outline\"},on:{\"click\":function($event){return _vm.getQtyFunction(cartItem, index, 'plus')}}},[_c('CIcon',{staticStyle:{\"width\":\"1.5rem\"},attrs:{\"name\":\"cil-plus\"}})],1)],1)]),_c('CCol',{attrs:{\"md\":\"2\"}},[_c('CRow',{staticStyle:{\"float\":\"right\"}},[_c('span',{staticClass:\"mr-1\",class:{ 'is-success': cartItem === _vm.selected }},[_vm._v(_vm._s(_vm.getPrice(cartItem)))]),_c('span',[_c('button',{staticClass:\"btn btn-danger p-1\",attrs:{\"id\":'btn' + index,\"color\":\"danger\",\"variant\":\"outline\"},on:{\"click\":function($event){return _vm.remove(cartItem, $event)}}},[_c('CIcon',{staticStyle:{\"pointer-events\":\"none\"},attrs:{\"name\":\"cil-delete\"}})],1)])])],1)],1)})],2)],1)],1),_c('CCard',{staticStyle:{\"height\":\"20vh\"}},[_c('CCardBody',{staticClass:\"d-flex flex-direction-column justify-content-between\"},[_c('CCol',{staticClass:\"d-flex justify-content-between\",staticStyle:{\"flex-basis\":\"auto\"}},[_c('h2',{staticClass:\"card-title mb-0 ml-2\",attrs:{\"id\":\"traffic\"}},[_vm._v(\"Total\")]),_c('CSelect',{attrs:{\"options\":_vm.options,\"id\":\"medSelect\"},on:{\"change\":function($event){return _vm.changeMethod($event)}},model:{value:(_vm.method),callback:function ($$v) {_vm.method=$$v},expression:\"method\"}}),_c('div',{staticClass:\"total mr-2\",staticStyle:{\"align-self\":\"flex-end\"}},[_vm._v(\" Rs. \"+_vm._s(_vm.total)+\" \")])],1),_c('hr',{staticStyle:{\"margin-bottom\":\"35px\",\"margin-top\":\"10px\"}}),_c('CRow',{staticClass:\"bg-transparent\"},[_c('CButton',{staticClass:\"col\",attrs:{\"variant\":\"outline\",\"color\":\"danger\"},on:{\"click\":function($event){return _vm.clearCart()}}},[_c('CIcon',{attrs:{\"name\":\"cil-delete\"}}),_vm._v(\" Clear \")],1),_c('CButton',{staticClass:\"col\",attrs:{\"variant\":\"outline\",\"color\":\"success\"},on:{\"click\":function($event){return _vm.submit($event)}}},[_c('CIcon',{attrs:{\"name\":\"cil-check-circle\"}}),_vm._v(\" Proceed \")],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <CRow>\r\n    <CCol md=\"8\">\r\n      <CCard class=\"card-style\">\r\n        <CCardBody>\r\n          <div>\r\n            <div class=\"input-group mb-2\">\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                placeholder=\"Search for a medicine...\"\r\n                aria-label=\"Search for...\"\r\n                v-model=\"searchField\"\r\n                @keyup=\"search()\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <CCardBody>\r\n            <CRow class=\"justify-content-between\">\r\n              <div\r\n                md=\"6\"\r\n                class=\"card mb-3\"\r\n                v-for=\"(searchResult, index) in searchResults\"\r\n                :key=\"index\"\r\n                style=\"max-width: 30%; min-width: 30%\"\r\n              >\r\n                <div class=\"card-body\">\r\n                  <h4 class=\"card-title\">\r\n                    {{ searchResult.medicine.name }}\r\n                  </h4>\r\n                  <CListGroup>\r\n                    <CListGroupItem>{{ searchResult.storage }}</CListGroupItem>\r\n                    <CListGroupItem>{{\r\n                      searchResult.medicine.size +\r\n                      searchResult.medicine.unit.short_name\r\n                    }}</CListGroupItem>\r\n                    <CListGroupItem>{{\r\n                      searchResult.remaining_quantity\r\n                    }}</CListGroupItem>\r\n                  </CListGroup>\r\n                </div>\r\n                <div class=\"bg-transparent\">\r\n                  <CButton\r\n                    class=\"col\"\r\n                    @click=\"addtoCart(searchResult)\"\r\n                    variant=\"outline\"\r\n                    color=\"success\"\r\n                  >\r\n                    <CIcon name=\"cil-cart\" />&nbsp;Add to Cart\r\n                  </CButton>\r\n                </div>\r\n              </div>\r\n            </CRow>\r\n          </CCardBody>\r\n        </CCardBody>\r\n      </CCard>\r\n    </CCol>\r\n    <CCol md=\"4\">\r\n      <CCard id=\"element-to-print\" style=\"height: 55vh; overflow-y: auto\">\r\n        <CCardBody>\r\n          <CRow class=\"d-flex justify-content-between\">\r\n            <h4 id=\"traffic\" class=\"card-title mb-0 ml-2\">\r\n              Reciept {{ recieptFor }}\r\n            </h4>\r\n          </CRow>\r\n          <hr style=\"margin-top: 0px\" />\r\n          <div class=\"list-group list-group-flush\">\r\n            <CRow>\r\n              <CCol md=\"6\" style=\"font-weight: bold\">Drug Name</CCol>\r\n              <CCol md=\"4\" style=\"font-weight: bold\">Quantity</CCol>\r\n              <CCol md=\"2\" style=\"font-weight: bold\">Amount(Rs.)</CCol>\r\n            </CRow>\r\n            <CRow\r\n              class=\"list-group-item justify-content-between d-flex\"\r\n              v-for=\"(cartItem, index) in localCart\"\r\n              :key=\"index\"\r\n              style=\"padding: 5px 1px\"\r\n              @click=\"selectingFunc(cartItem)\"\r\n              v-bind:class=\"{ 'is-success': cartItem === selected }\"\r\n            >\r\n              <CCol md=\"6\" class=\"text-left\">\r\n                <span>{{ cartItem.name + \" \" + cartItem.size }}</span>\r\n              </CCol>\r\n              <CCol md=\"4\">\r\n                <span>\r\n                  <CButton\r\n                    color=\"success\"\r\n                    @click=\"getQtyFunction(cartItem, index, 'min')\"\r\n                    class=\"p-0\"\r\n                    shape=\"pill\"\r\n                    variant=\"outline\"\r\n                  >\r\n                    <CIcon style=\"width: 1.5rem\" name=\"cil-minus\" /> </CButton\r\n                  >&nbsp; <span>{{ getQty(cartItem) }}</span\r\n                  >&nbsp;\r\n                  <CButton\r\n                    color=\"success\"\r\n                    @click=\"getQtyFunction(cartItem, index, 'plus')\"\r\n                    class=\"p-0\"\r\n                    shape=\"pill\"\r\n                    variant=\"outline\"\r\n                  >\r\n                    <CIcon style=\"width: 1.5rem\" name=\"cil-plus\" />\r\n                  </CButton>\r\n                </span>\r\n              </CCol>\r\n              <CCol md=\"2\">\r\n                <CRow style=\"float: right\">\r\n                  <span\r\n                    class=\"mr-1\"\r\n                    v-bind:class=\"{ 'is-success': cartItem === selected }\"\r\n                    >{{ getPrice(cartItem) }}</span\r\n                  >\r\n                  <span>\r\n                    <button\r\n                      :id=\"'btn' + index\"\r\n                      color=\"danger\"\r\n                      @click=\"remove(cartItem, $event)\"\r\n                      class=\"btn btn-danger p-1\"\r\n                      variant=\"outline\"\r\n                    >\r\n                      <CIcon style=\"pointer-events: none\" name=\"cil-delete\" />\r\n                    </button>\r\n                  </span>\r\n                </CRow>\r\n              </CCol>\r\n            </CRow>\r\n          </div>\r\n        </CCardBody>\r\n      </CCard>\r\n      <CCard style=\"height: 20vh\">\r\n        <CCardBody class=\"d-flex flex-direction-column justify-content-between\">\r\n          <CCol class=\"d-flex justify-content-between\" style=\"flex-basis: auto\">\r\n              <h2 id=\"traffic\" class=\"card-title mb-0 ml-2\">Total</h2>\r\n              <CSelect\r\n                @change=\"changeMethod($event)\"\r\n                :options=\"options\"\r\n                v-model=\"method\"\r\n                id=\"medSelect\"\r\n              />\r\n            <div class=\"total mr-2\" style=\"align-self: flex-end\">\r\n              Rs. {{ total }}\r\n            </div>\r\n          </CCol>\r\n          <hr style=\"margin-bottom: 35px; margin-top: 10px\" />\r\n          <CRow class=\"bg-transparent\">\r\n            <CButton\r\n              class=\"col\"\r\n              @click=\"clearCart()\"\r\n              variant=\"outline\"\r\n              color=\"danger\"\r\n            >\r\n              <CIcon name=\"cil-delete\" />&nbsp;Clear\r\n            </CButton>\r\n            <CButton\r\n              class=\"col\"\r\n              @click=\"submit($event)\"\r\n              variant=\"outline\"\r\n              color=\"success\"\r\n            >\r\n              <CIcon name=\"cil-check-circle\" />&nbsp;Proceed\r\n            </CButton>\r\n          </CRow>\r\n        </CCardBody>\r\n      </CCard>\r\n    </CCol>\r\n  </CRow>\r\n</template>\r\n<script>\r\nimport _ from \"lodash\";\r\nimport moment from \"moment\";\r\nexport default {\r\n  name: \"Cashier\",\r\n  data() {\r\n    return {\r\n      searchResults: [],\r\n      price: Number,\r\n      cart: [],\r\n      localCart: [],\r\n      options: [\"Cash\", \"Card\"],\r\n      method: \"Cash\",\r\n      total: 0,\r\n      searchField: \"\",\r\n      row: {},\r\n      recieptFor: \"\",\r\n      selected: {},\r\n    };\r\n  },\r\n  created() {\r\n    window.addEventListener(\"keydown\", (e) => {\r\n      if (e.key == \"+\") {\r\n        this.getQtyFunction(this.selected, 1, \"plus\");\r\n      }\r\n    });\r\n    window.addEventListener(\"keydown\", (e) => {\r\n      if (e.key == \"-\") {\r\n        this.getQtyFunction(this.selected, 1, \"min\");\r\n      }\r\n    });\r\n  },\r\n  mounted() {\r\n    this.getData();\r\n    if (this.$route.params.row) {\r\n      console.log(this.$route.params.row);\r\n      this.recieptFor = \"for \" + this.$route.params.row.customer.firstname;\r\n      this.row = this.$route.params.row;\r\n    }\r\n  },\r\n  methods: {\r\n    changeMethod(e) {\r\n      this.method = e.target.value;\r\n    },\r\n    search() {\r\n      if (this.searchField) {\r\n        this.$http\r\n          .get(\"http://localhost:3000/batch/batch_search/\" + this.searchField)\r\n          .then((res) => {\r\n            this.searchResults = res.data;\r\n          })\r\n          .catch((err) => {\r\n            // eslint-disable-next-line no-console\r\n            console.log(err.response);\r\n          });\r\n      } else {\r\n        this.getData();\r\n      }\r\n    },\r\n    submit(e) {\r\n      e.preventDefault();\r\n      console.log(this.method);\r\n      if(this.$route.params.row) {\r\n        this.formData = {\r\n          customer: this.row.customer._id,\r\n          total: this.total,\r\n          list: this.localCart,\r\n          user: sessionStorage.getItem('user')\r\n        };\r\n        if(this.localCart.length != 0) {\r\n          console.log(this.localCart)\r\n          this.$http\r\n            .put(\"http://localhost:3000/onlineOrder/cashier/\" + this.row._id, this.formData)\r\n            .then((res) => {\r\n              this.$swal.fire(\"Done!\", \"Transaction Completed!\", \"success\");\r\n              this.localCart = [];\r\n              this.total = 0;\r\n              this.$route.params = {}\r\n              this.recieptFor = \"\";\r\n              this.getData();\r\n              this.row = {}\r\n            })\r\n            .catch((err) => {\r\n              // eslint-disable-next-line no-console\r\n              console.log(err.response);\r\n            });\r\n        } else {\r\n          this.$swal.fire(\"No items in cart\",\"Check the cart again.\",\"error\");\r\n        }\r\n      } else {\r\n        this.formData = {\r\n          total: this.total,\r\n          items: this.localCart,\r\n          method: this.method,\r\n          user: sessionStorage.getItem('user')\r\n        };\r\n        if(this.localCart.length != 0) {\r\n          console.log(this.localCart)\r\n          this.$http\r\n            .post(\"http://localhost:3000/sales/post\", this.formData)\r\n            .then((res) => {\r\n              this.$swal.fire(\"Done!\", \"Order is submitted!\", \"success\");\r\n              this.localCart = [];\r\n              this.total = 0;\r\n              this.getData();\r\n            })\r\n            .catch((err) => {\r\n              // eslint-disable-next-line no-console\r\n              console.log(err);\r\n              console.log(err.response);\r\n            });\r\n        } else {\r\n          this.$swal.fire(\"No items in cart\",\"Check the cart again.\",\"error\");\r\n        }\r\n      }\r\n    },\r\n    getPrice(row) {\r\n      return row.price;\r\n    },\r\n    clearCart() {\r\n      this.localCart = [];\r\n      this.total = 0;\r\n    },\r\n    getname: function (name, unit) {\r\n      let exist = name.indexOf(\"[\");\r\n      if (exist === -1) {\r\n        return \"Not Mentioned\";\r\n      } else {\r\n        return \"[\" + name.split(\"[\")[1] + unit;\r\n      }\r\n    },\r\n    getQty(row) {\r\n      return row.qty;\r\n    },\r\n    getQtyFunction: function (item, index, action) {\r\n      if (action == \"plus\") {\r\n        if (parseInt(item.Remainingqty) >= item.qty + 1) {\r\n          item.price = parseFloat(item.price) + parseFloat(item.selling_price);\r\n          this.total = this.total + parseFloat(item.selling_price);\r\n          return item.qty++;\r\n        }\r\n      } else if (action == \"min\") {\r\n        if (parseInt(item.qty) >= 2) {\r\n          item.price = parseFloat(item.price) - parseFloat(item.selling_price);\r\n          this.total = this.total - parseFloat(item.selling_price);\r\n          return item.qty--;\r\n        }\r\n      } else {\r\n        return 1;\r\n      }\r\n    },\r\n    async getData() {\r\n      await this.$http\r\n        .get(\"http://localhost:3000/batch/get\")\r\n        .then((res) => {\r\n          let arr = [];\r\n          res.data.forEach((element) => {\r\n            var given = moment(element.expiry_date);\r\n            var current = moment().startOf(\"day\");\r\n            var difference = moment.duration(given.diff(current)).asDays();\r\n            if (element.remaining_quantity != 0 && !(difference <= 30)) {\r\n              arr.push(element);\r\n            }\r\n          });\r\n          this.searchResults = arr;\r\n          console.log(res.data);\r\n        })\r\n        .catch((err) => {\r\n          // eslint-disable-next-line no-console\r\n          console.log(err.response);\r\n          if (err.response.status == 401) {\r\n            this.$store.dispatch(\"logout\").then(() => {});\r\n          }\r\n        });\r\n    },\r\n    addtoCart(e) {\r\n      var given = moment(e.expiry_date);\r\n      var current = moment().startOf(\"day\");\r\n      var difference = moment.duration(given.diff(current)).asDays();\r\n      if (difference <= 30) {\r\n        this.$swal.fire(\r\n          \"This item has only \" +\r\n            String(difference).split(\".\")[0] +\r\n            \" days before expiring.\",\r\n          \"\",\r\n          \"error\"\r\n        );\r\n      } else {\r\n        let cartItem = {};\r\n        if (this.localCart.length != 0) {\r\n          if (\r\n            this.localCart.filter((l) => l.name === e.medicine.name).length > 0\r\n          ) {\r\n            this.$swal.fire(\"Item already in the Cart!\");\r\n          } else {\r\n            this.cartFunction(cartItem, e);\r\n          }\r\n        } else {\r\n          this.cartFunction(cartItem, e);\r\n        }\r\n      }\r\n    },\r\n    cartFunction(cartItem, e) {\r\n      cartItem.name = e.medicine.name;\r\n      cartItem.size = e.medicine.size;\r\n      cartItem.qty = 1;\r\n      cartItem.Remainingqty = e.remaining_quantity;\r\n      cartItem.price = e.selling_price;\r\n      cartItem.selling_price = e.selling_price;\r\n      cartItem.id = e._id;\r\n      this.localCart.push(cartItem);\r\n      this.total = this.total + parseFloat(e.selling_price);\r\n      this.cart.push(e);\r\n    },\r\n    remove(row) {\r\n      _.remove(this.localCart, function (element) {\r\n        return element.name === row.name;\r\n      });\r\n      this.total = this.total - row.price;\r\n    },\r\n    selectingFunc(item) {\r\n      this.selected = item;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.card-style {\r\n  max-height: 78vh;\r\n  min-height: 78vh;\r\n  overflow-y: auto;\r\n}\r\n.list-group-item:last-child {\r\n  border-bottom-width: 1px !important;\r\n}\r\n.total {\r\n  font-weight: bold;\r\n  font-size: 30px;\r\n}\r\n.is-success {\r\n  font-weight: 800;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cashier.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cashier.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cashier.vue?vue&type=template&id=833df974&scoped=true&\"\nimport script from \"./Cashier.vue?vue&type=script&lang=js&\"\nexport * from \"./Cashier.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Cashier.vue?vue&type=style&index=0&id=833df974&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"833df974\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cashier.vue?vue&type=style&index=0&id=833df974&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cashier.vue?vue&type=style&index=0&id=833df974&scoped=true&lang=css&\""],"sourceRoot":""}