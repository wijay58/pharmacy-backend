{"version":3,"sources":["webpack:///./src/views/OnlineOrders.vue?4a89","webpack:///src/views/OnlineOrders.vue","webpack:///./src/views/OnlineOrders.vue?20ab","webpack:///./src/views/OnlineOrders.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","on","handleTabChange","attrs","rowsNew","columns","options","scopedSlots","_u","key","fn","ref","row","directives","name","rawName","value","expression","staticClass","$event","goToCashier","rejectRow","openLink","_v","rowsReserved","openModal","rowsClosed","Boolean","items","fields","staticRenderFns","data","columnsClasses","actions","prescription","date","filterByColumn","perPage","texts","filter","filterBy","count","filterable","headings","mounted","getData","computed","isAdmin","$store","getters","methods","$http","win","window","open","focus","list","forEach","$refs","modal","$swal","fire","title","input","inputAttributes","autocapitalize","showCancelButton","confirmButtonText","allowOutsideClick","console","log","$router","push","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,WAAW,CAACE,GAAG,CAAC,aAAaN,EAAIO,kBAAkB,CAACH,EAAG,QAAQ,CAACI,MAAM,CAAC,MAAQ,QAAQ,CAACJ,EAAG,YAAY,CAACA,EAAG,iBAAiB,CAACI,MAAM,CAAC,KAAOR,EAAIS,QAAQ,QAAUT,EAAIU,QAAQ,QAAUV,EAAIW,SAASC,YAAYZ,EAAIa,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GACtV,IAAIC,EAAMD,EAAIC,IACd,OAAOb,EAAG,MAAM,GAAG,CAACA,EAAG,UAAU,CAACc,WAAW,CAAC,CAACC,KAAK,YAAYC,QAAQ,cAAcC,MAAM,mBAAqBC,WAAW,uBAAuBC,YAAY,YAAYf,MAAM,CAAC,QAAU,UAAU,MAAQ,WAAWF,GAAG,CAAC,MAAQ,SAASkB,GAAQ,OAAOxB,EAAIyB,YAAYR,MAAQ,CAACb,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,eAAe,GAAGJ,EAAG,UAAU,CAACc,WAAW,CAAC,CAACC,KAAK,YAAYC,QAAQ,cAAcC,MAAM,eAAiBC,WAAW,mBAAmBC,YAAY,YAAYf,MAAM,CAAC,QAAU,UAAU,MAAQ,UAAUF,GAAG,CAAC,MAAQ,SAASkB,GAAQ,OAAOxB,EAAI0B,UAAUT,MAAQ,CAACb,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,iBAAiB,IAAI,KAAK,CAACM,IAAI,eAAeC,GAAG,SAASC,GAC7oB,IAAIC,EAAMD,EAAIC,IACd,OAAOb,EAAG,MAAM,GAAG,CAACA,EAAG,UAAU,CAACmB,YAAY,YAAYf,MAAM,CAAC,QAAU,UAAU,MAAQ,WAAWF,GAAG,CAAC,MAAQ,SAASkB,GAAQ,OAAOxB,EAAI2B,SAASV,MAAQ,CAACjB,EAAI4B,GAAG,YAAY,UAAU,IAAI,GAAGxB,EAAG,QAAQ,CAACI,MAAM,CAAC,MAAQ,aAAa,CAACJ,EAAG,YAAY,CAACA,EAAG,iBAAiB,CAACI,MAAM,CAAC,KAAOR,EAAI6B,aAAa,QAAU7B,EAAIU,QAAQ,QAAUV,EAAIW,SAASC,YAAYZ,EAAIa,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAC/Y,IAAIC,EAAMD,EAAIC,IACd,OAAOb,EAAG,MAAM,GAAG,CAACA,EAAG,UAAU,CAACc,WAAW,CAAC,CAACC,KAAK,YAAYC,QAAQ,cAAcC,MAAM,WAAaC,WAAW,eAAeC,YAAY,OAAOf,MAAM,CAAC,QAAU,UAAU,MAAQ,WAAWF,GAAG,CAAC,MAAQ,SAASkB,GAAQ,OAAOxB,EAAI8B,UAAUb,MAAQ,CAACb,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,6BAA6B,IAAI,KAAK,CAACM,IAAI,eAAeC,GAAG,SAASC,GAC/V,IAAIC,EAAMD,EAAIC,IACd,OAAOb,EAAG,MAAM,GAAG,CAACA,EAAG,UAAU,CAACmB,YAAY,YAAYf,MAAM,CAAC,QAAU,UAAU,MAAQ,WAAWF,GAAG,CAAC,MAAQ,SAASkB,GAAQ,OAAOxB,EAAI2B,SAASV,MAAQ,CAACjB,EAAI4B,GAAG,YAAY,UAAU,IAAI,GAAGxB,EAAG,QAAQ,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,YAAY,CAACA,EAAG,iBAAiB,CAACI,MAAM,CAAC,KAAOR,EAAI+B,WAAW,QAAU/B,EAAIU,QAAQ,QAAUV,EAAIW,SAASC,YAAYZ,EAAIa,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GACzY,IAAIC,EAAMD,EAAIC,IACd,OAAOb,EAAG,MAAM,GAAG,CAACA,EAAG,UAAU,CAACc,WAAW,CAAC,CAACC,KAAK,YAAYC,QAAQ,cAAcC,MAAM,WAAaC,WAAW,eAAeC,YAAY,OAAOf,MAAM,CAAC,QAAU,UAAU,MAAQ,WAAWF,GAAG,CAAC,MAAQ,SAASkB,GAAQ,OAAOxB,EAAI8B,UAAUb,MAAQ,CAACb,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,6BAA6B,IAAI,KAAK,CAACM,IAAI,eAAeC,GAAG,SAASC,GAC/V,IAAIC,EAAMD,EAAIC,IACd,OAAOb,EAAG,MAAM,GAAG,CAACA,EAAG,UAAU,CAACmB,YAAY,YAAYf,MAAM,CAAC,QAAU,UAAU,MAAQ,WAAWF,GAAG,CAAC,MAAQ,SAASkB,GAAQ,OAAOxB,EAAI2B,SAASV,MAAQ,CAACjB,EAAI4B,GAAG,YAAY,UAAU,IAAI,GAAGxB,EAAG,cAAc,CAACY,IAAI,QAAQR,MAAM,CAAC,SAAWwB,SAAQ,GAAM,gBAAgB,SAAS,CAAC5B,EAAG,aAAa,CAACI,MAAM,CAAC,MAAQR,EAAIiC,MAAM,OAASjC,EAAIkC,OAAO,MAAQ,OAAO,IAAI,IAC3WC,EAAkB,G,qBC0FtB,GACEhB,KAAM,eACNiB,KAFF,WAGI,MAAO,CACL1B,QAAS,CACf,sBACA,qBACA,OACA,eACA,uBACA,WAEMC,QAAS,CACP0B,eAAgB,CACdC,QAAS,cACTC,aAAc,cACd,qBAAsB,cACtBC,KAAV,eAEQC,gBAAgB,EAChBC,QAAS,GACTC,MAAO,CACLC,OAAQ,UACRC,SAAU,qBACVC,MAAO,KAETC,WAAY,CACpB,qBACA,sBACA,QAEQC,SAAU,CACR7B,KAAM,OACN,qBAAsB,OACtB,qBAAwB,UAG5BV,QAAS,GACToB,aAAc,GACdE,WAAY,GACZE,MAAO,GACPC,OAAQ,CAAC,OAAf,iCAGEe,QA5CF,WA6CIhD,KAAKiD,WAEPC,SAAU,CACRC,QAAS,WACP,OAAOnD,KAAKoD,OAAOC,QAAQF,UAG/BG,QAAS,CACPhD,gBADJ,WAEMN,KAAKiD,WAEPA,QAJJ,WAIA,WACMjD,KAAKQ,QAAU,GACfR,KAAK4B,aAAe,GACpB5B,KAAK8B,WAAa,GAClB9B,KAAKuD,MACX,6CACA,kBACQ,EAAR,0BACU,IAAV,MACA,iBACA,QACA,qBACU,EAAV,OACA,aACY,EAAZ,gBACA,aACY,EAAZ,qBACA,cACY,EAAZ,sBAGQ,QAAR,eAEA,mBAEA,wBACU,EAAV,mDAKI7B,SAnCJ,SAmCA,GACM,IAAI8B,EAAMC,OAAOC,KAAK1C,EAAIsB,aAAc,UACxCkB,EAAIG,SAEN9B,UAvCJ,SAuCA,cACM7B,KAAKgC,MAAQ,GACbhB,EAAI4C,KAAKC,SAAQ,SAAvB,GACQ,EAAR,iBAEM7D,KAAK8D,MAAMC,MAAML,KAAK,UAExBjC,UA9CJ,SA8CA,cACMzB,KAAKgE,MAAMC,KAAK,CACdC,MAAO,6BACPC,MAAO,OACPC,gBAAiB,CACfC,eAAgB,OAElBC,kBAAkB,EAClBC,kBAAmB,SACnBC,kBAAmB,WAA3B,8BACA,kBACA,cACU,EAAV,MACA,gDAAY,QAAZ,UACA,kBACY,EAAZ,aAEA,mBAEY,QAAZ,mBAGUC,QAAQC,IAAI,iBAIlBlD,YAxEJ,SAwEA,GACMxB,KAAK2E,QAAQC,KAAK,CAAxB,mCCpOsV,I,YCOlVC,EAAY,eACd,EACA/E,EACAoC,GACA,EACA,KACA,KACA,MAIa,aAAA2C,E","file":"js/chunk-2d0af432.051ffca8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('vue-tabs',{on:{\"tab-change\":_vm.handleTabChange}},[_c('v-tab',{attrs:{\"title\":\"New\"}},[_c('CCardBody',[_c('v-client-table',{attrs:{\"data\":_vm.rowsNew,\"columns\":_vm.columns,\"options\":_vm.options},scopedSlots:_vm._u([{key:\"actions\",fn:function(ref){\nvar row = ref.row;\nreturn _c('div',{},[_c('CButton',{directives:[{name:\"c-tooltip\",rawName:\"v-c-tooltip\",value:('Reserve medicine'),expression:\"'Reserve medicine'\"}],staticClass:\"mr-3 mb-1\",attrs:{\"variant\":\"outline\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.goToCashier(row)}}},[_c('CIcon',{attrs:{\"name\":\"cil-plus\"}})],1),_c('CButton',{directives:[{name:\"c-tooltip\",rawName:\"v-c-tooltip\",value:('Reject order'),expression:\"'Reject order'\"}],staticClass:\"mr-3 mb-1\",attrs:{\"variant\":\"outline\",\"color\":\"danger\"},on:{\"click\":function($event){return _vm.rejectRow(row)}}},[_c('CIcon',{attrs:{\"name\":\"cil-delete\"}})],1)],1)}},{key:\"prescription\",fn:function(ref){\nvar row = ref.row;\nreturn _c('div',{},[_c('CButton',{staticClass:\"mr-3 mb-1\",attrs:{\"variant\":\"outline\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.openLink(row)}}},[_vm._v(\"View \")])],1)}}])})],1)],1),_c('v-tab',{attrs:{\"title\":\"Reserved\"}},[_c('CCardBody',[_c('v-client-table',{attrs:{\"data\":_vm.rowsReserved,\"columns\":_vm.columns,\"options\":_vm.options},scopedSlots:_vm._u([{key:\"actions\",fn:function(ref){\nvar row = ref.row;\nreturn _c('div',{},[_c('CButton',{directives:[{name:\"c-tooltip\",rawName:\"v-c-tooltip\",value:('See bill'),expression:\"'See bill'\"}],staticClass:\"mr-3\",attrs:{\"variant\":\"outline\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.openModal(row)}}},[_c('CIcon',{attrs:{\"name\":\"cil-arrow-circle-right\"}})],1)],1)}},{key:\"prescription\",fn:function(ref){\nvar row = ref.row;\nreturn _c('div',{},[_c('CButton',{staticClass:\"mr-3 mb-1\",attrs:{\"variant\":\"outline\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.openLink(row)}}},[_vm._v(\"View \")])],1)}}])})],1)],1),_c('v-tab',{attrs:{\"title\":\"Paid\"}},[_c('CCardBody',[_c('v-client-table',{attrs:{\"data\":_vm.rowsClosed,\"columns\":_vm.columns,\"options\":_vm.options},scopedSlots:_vm._u([{key:\"actions\",fn:function(ref){\nvar row = ref.row;\nreturn _c('div',{},[_c('CButton',{directives:[{name:\"c-tooltip\",rawName:\"v-c-tooltip\",value:('See bill'),expression:\"'See bill'\"}],staticClass:\"mr-3\",attrs:{\"variant\":\"outline\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.openModal(row)}}},[_c('CIcon',{attrs:{\"name\":\"cil-arrow-circle-right\"}})],1)],1)}},{key:\"prescription\",fn:function(ref){\nvar row = ref.row;\nreturn _c('div',{},[_c('CButton',{staticClass:\"mr-3 mb-1\",attrs:{\"variant\":\"outline\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.openLink(row)}}},[_vm._v(\"View \")])],1)}}])})],1)],1),_c('sweet-modal',{ref:\"modal\",attrs:{\"blocking\":Boolean(true),\"overlay-theme\":\"dark\"}},[_c('CDataTable',{attrs:{\"items\":_vm.items,\"fields\":_vm.fields,\"hover\":\"\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <vue-tabs @tab-change=\"handleTabChange\">\r\n    <v-tab title=\"New\">\r\n      <CCardBody>\r\n        <v-client-table :data=\"rowsNew\" :columns=\"columns\" :options=\"options\">\r\n          <div slot=\"actions\" slot-scope=\"{ row }\">\r\n            <CButton\r\n              class=\"mr-3 mb-1\"\r\n              variant=\"outline\"\r\n              @click=\"goToCashier(row)\"\r\n              color=\"primary\"\r\n              v-c-tooltip=\"'Reserve medicine'\"\r\n            >\r\n              <CIcon name=\"cil-plus\" />\r\n            </CButton>\r\n            <CButton\r\n              class=\"mr-3 mb-1\"\r\n              @click=\"rejectRow(row)\"\r\n              variant=\"outline\"\r\n              color=\"danger\"\r\n              v-c-tooltip=\"'Reject order'\"\r\n            >\r\n              <CIcon name=\"cil-delete\" />\r\n            </CButton>\r\n          </div>\r\n          <div slot=\"prescription\" slot-scope=\"{ row }\">\r\n            <CButton\r\n              class=\"mr-3 mb-1\"\r\n              variant=\"outline\"\r\n              @click=\"openLink(row)\"\r\n              color=\"primary\"\r\n            >View\r\n            </CButton>\r\n          </div>\r\n        </v-client-table> \r\n      </CCardBody>\r\n    </v-tab>\r\n\r\n    <v-tab title=\"Reserved\"> \r\n      <CCardBody>\r\n        <v-client-table :data=\"rowsReserved\" :columns=\"columns\" :options=\"options\">\r\n          <div slot=\"actions\" slot-scope=\"{ row }\">\r\n            <CButton\r\n              class=\"mr-3\"\r\n              variant=\"outline\"\r\n              @click=\"openModal(row)\"\r\n              color=\"primary\"\r\n              v-c-tooltip=\"'See bill'\"\r\n            >\r\n              <CIcon name=\"cil-arrow-circle-right\" />\r\n            </CButton>\r\n          </div>\r\n          <div slot=\"prescription\" slot-scope=\"{ row }\">\r\n            <CButton\r\n              class=\"mr-3 mb-1\"\r\n              variant=\"outline\"\r\n              @click=\"openLink(row)\"\r\n              color=\"primary\"\r\n            >View\r\n            </CButton>\r\n          </div>\r\n        </v-client-table> \r\n      </CCardBody>\r\n    </v-tab>\r\n\r\n    <v-tab title=\"Paid\">\r\n      <CCardBody>\r\n        <v-client-table :data=\"rowsClosed\" :columns=\"columns\" :options=\"options\">\r\n          <div slot=\"actions\" slot-scope=\"{ row }\">\r\n            <CButton\r\n              class=\"mr-3\"\r\n              variant=\"outline\"\r\n              @click=\"openModal(row)\"\r\n              color=\"primary\"\r\n              v-c-tooltip=\"'See bill'\"\r\n            >\r\n              <CIcon name=\"cil-arrow-circle-right\" />\r\n            </CButton>\r\n          </div>\r\n          <div slot=\"prescription\" slot-scope=\"{ row }\">\r\n            <CButton\r\n              class=\"mr-3 mb-1\"\r\n              variant=\"outline\"\r\n              @click=\"openLink(row)\"\r\n              color=\"primary\"\r\n            >View\r\n            </CButton>\r\n          </div>\r\n        </v-client-table> \r\n      </CCardBody>\r\n    </v-tab>\r\n    <sweet-modal :blocking=\"Boolean(true)\" ref=\"modal\" overlay-theme=\"dark\">\r\n      <CDataTable\r\n        :items=\"items\"\r\n        :fields=\"fields\"\r\n        hover\r\n      >\r\n      </CDataTable>\r\n    </sweet-modal>\r\n  </vue-tabs>\r\n</template>\r\n<script>\r\nimport moment from \"moment\";\r\nexport default {\r\n  name: \"OnlineOrders\",\r\n  data() {\r\n    return {\r\n      columns: [\r\n        \"online_order_number\",\r\n        \"customer.firstname\",\r\n        \"date\",\r\n        \"prescription\",\r\n        \"customer_order_notes\",\r\n        \"actions\"\r\n      ],\r\n      options: {\r\n        columnsClasses: {\r\n          actions: \"text-center\",\r\n          prescription: \"text-center\",\r\n          \"customer.firstname\": \"text-center\",\r\n          date : \"text-center\",\r\n        },\r\n        filterByColumn: true,\r\n        perPage: 10,\r\n        texts: {\r\n          filter: \"Filter:\",\r\n          filterBy: \"Filter by {column}\",\r\n          count: \" \",\r\n        },\r\n        filterable: [\r\n          \"customer.firstname\",\r\n          \"online_order_number\",\r\n          \"date\",\r\n        ],\r\n        headings: {\r\n          name: \"Name\",\r\n          \"customer.firstname\": \"Name\",\r\n          \"customer_order_notes\": \"Notes\"\r\n        },\r\n      },\r\n      rowsNew: [],\r\n      rowsReserved: [],\r\n      rowsClosed: [],\r\n      items: [],\r\n      fields: ['name','selling_price','qty','price'],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getData();\r\n  },\r\n  computed: {\r\n    isAdmin: function() {\r\n      return this.$store.getters.isAdmin;\r\n    }\r\n  },\r\n  methods: {\r\n    handleTabChange() {\r\n      this.getData();\r\n    },\r\n    getData() {\r\n      this.rowsNew = [];\r\n      this.rowsReserved = [];\r\n      this.rowsClosed = [];\r\n      this.$http\r\n        .get(\"http://localhost:3000/onlineOrder/get\")\r\n        .then((res) => {\r\n          res.data.forEach((item) => {\r\n            let local = moment\r\n              .utc(item.createdAt)\r\n              .local()\r\n              .format(\"YYYY-MM-DD\");\r\n            item.date = local;\r\n            if(item.stage==\"1\") {\r\n              this.rowsNew.push(item)\r\n            }else if(item.stage==\"2\") {\r\n              this.rowsReserved.push(item)\r\n            }else if(item.stage==\"3\"){\r\n              this.rowsClosed.push(item)\r\n            }\r\n          });\r\n          console.log(res.data);\r\n        })\r\n        .catch((err) => {\r\n          // eslint-disable-next-line no-console\r\n          if(err.response.status == 401) {\r\n            this.$store.dispatch(\"logout\").then(() => {\r\n          });\r\n        }\r\n        });\r\n    },\r\n    openLink(row) {\r\n      var win = window.open(row.prescription, '_blank');\r\n      win.focus();\r\n    },\r\n    openModal(row) {\r\n      this.items = [];\r\n      row.list.forEach(item => {\r\n        this.items.push(item)\r\n      });\r\n      this.$refs.modal.open(\"modal\");\r\n    },\r\n    rejectRow(row) {\r\n      this.$swal.fire({\r\n        title: 'Enter the reason to reject',\r\n        input: 'text',\r\n        inputAttributes: {\r\n          autocapitalize: 'off'\r\n        },\r\n        showCancelButton: true,\r\n        confirmButtonText: 'Reject',\r\n        allowOutsideClick: () => !this.$swal.isLoading()\r\n      }).then((result) => {\r\n        if(result.isConfirmed) {\r\n          this.$http\r\n            .put(\"http://localhost:3000/onlineOrder/\" + row._id, {message:result.value})\r\n            .then((res) => {\r\n              this.getData();\r\n            })\r\n            .catch((err) => {\r\n              // eslint-disable-next-line no-console\r\n              console.log(err.response);\r\n            });    \r\n        } else {\r\n          console.log('cancelled')\r\n        }\r\n        })\r\n    },\r\n    goToCashier(row) {\r\n      this.$router.push({ name: \"Cashier\", params: { row: row } });\r\n    },\r\n  },\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OnlineOrders.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OnlineOrders.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OnlineOrders.vue?vue&type=template&id=3722e529&\"\nimport script from \"./OnlineOrders.vue?vue&type=script&lang=js&\"\nexport * from \"./OnlineOrders.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}