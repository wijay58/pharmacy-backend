(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0af432"],{"0e29":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("vue-tabs",{on:{"tab-change":t.handleTabChange}},[o("v-tab",{attrs:{title:"New"}},[o("CCardBody",[o("v-client-table",{attrs:{data:t.rowsNew,columns:t.columns,options:t.options},scopedSlots:t._u([{key:"actions",fn:function(e){var n=e.row;return o("div",{},[o("CButton",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"Reserve medicine",expression:"'Reserve medicine'"}],staticClass:"mr-3 mb-1",attrs:{variant:"outline",color:"primary"},on:{click:function(e){return t.goToCashier(n)}}},[o("CIcon",{attrs:{name:"cil-plus"}})],1),o("CButton",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"Reject order",expression:"'Reject order'"}],staticClass:"mr-3 mb-1",attrs:{variant:"outline",color:"danger"},on:{click:function(e){return t.rejectRow(n)}}},[o("CIcon",{attrs:{name:"cil-delete"}})],1)],1)}},{key:"prescription",fn:function(e){var n=e.row;return o("div",{},[o("CButton",{staticClass:"mr-3 mb-1",attrs:{variant:"outline",color:"primary"},on:{click:function(e){return t.openLink(n)}}},[t._v("View ")])],1)}}])})],1)],1),o("v-tab",{attrs:{title:"Reserved"}},[o("CCardBody",[o("v-client-table",{attrs:{data:t.rowsReserved,columns:t.columns,options:t.options},scopedSlots:t._u([{key:"actions",fn:function(e){var n=e.row;return o("div",{},[o("CButton",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"See bill",expression:"'See bill'"}],staticClass:"mr-3",attrs:{variant:"outline",color:"primary"},on:{click:function(e){return t.openModal(n)}}},[o("CIcon",{attrs:{name:"cil-arrow-circle-right"}})],1)],1)}},{key:"prescription",fn:function(e){var n=e.row;return o("div",{},[o("CButton",{staticClass:"mr-3 mb-1",attrs:{variant:"outline",color:"primary"},on:{click:function(e){return t.openLink(n)}}},[t._v("View ")])],1)}}])})],1)],1),o("v-tab",{attrs:{title:"Paid"}},[o("CCardBody",[o("v-client-table",{attrs:{data:t.rowsClosed,columns:t.columns,options:t.options},scopedSlots:t._u([{key:"actions",fn:function(e){var n=e.row;return o("div",{},[o("CButton",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"See bill",expression:"'See bill'"}],staticClass:"mr-3",attrs:{variant:"outline",color:"primary"},on:{click:function(e){return t.openModal(n)}}},[o("CIcon",{attrs:{name:"cil-arrow-circle-right"}})],1)],1)}},{key:"prescription",fn:function(e){var n=e.row;return o("div",{},[o("CButton",{staticClass:"mr-3 mb-1",attrs:{variant:"outline",color:"primary"},on:{click:function(e){return t.openLink(n)}}},[t._v("View ")])],1)}}])})],1)],1),o("sweet-modal",{ref:"modal",attrs:{blocking:Boolean(!0),"overlay-theme":"dark"}},[o("CDataTable",{attrs:{items:t.items,fields:t.fields,hover:""}})],1)],1)},r=[],i=o("c1df"),a=o.n(i),s={name:"OnlineOrders",data:function(){return{columns:["online_order_number","customer.firstname","date","prescription","customer_order_notes","actions"],options:{columnsClasses:{actions:"text-center",prescription:"text-center","customer.firstname":"text-center",date:"text-center"},filterByColumn:!0,perPage:10,texts:{filter:"Filter:",filterBy:"Filter by {column}",count:" "},filterable:["customer.firstname","online_order_number","date"],headings:{name:"Name","customer.firstname":"Name",customer_order_notes:"Notes"}},rowsNew:[],rowsReserved:[],rowsClosed:[],items:[],fields:["name","selling_price","qty","price"]}},mounted:function(){this.getData()},computed:{isAdmin:function(){return this.$store.getters.isAdmin}},methods:{handleTabChange:function(){this.getData()},getData:function(){var t=this;this.rowsNew=[],this.rowsReserved=[],this.rowsClosed=[],this.$http.get("http://localhost:3000/onlineOrder/get").then((function(e){e.data.forEach((function(e){var o=a.a.utc(e.createdAt).local().format("YYYY-MM-DD");e.date=o,"1"==e.stage?t.rowsNew.push(e):"2"==e.stage?t.rowsReserved.push(e):"3"==e.stage&&t.rowsClosed.push(e)})),console.log(e.data)})).catch((function(e){401==e.response.status&&t.$store.dispatch("logout").then((function(){}))}))},openLink:function(t){var e=window.open(t.prescription,"_blank");e.focus()},openModal:function(t){var e=this;this.items=[],t.list.forEach((function(t){e.items.push(t)})),this.$refs.modal.open("modal")},rejectRow:function(t){var e=this;this.$swal.fire({title:"Enter the reason to reject",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Reject",allowOutsideClick:function(){return!e.$swal.isLoading()}}).then((function(o){o.isConfirmed?e.$http.put("http://localhost:3000/onlineOrder/"+t._id,{message:o.value}).then((function(t){e.getData()})).catch((function(t){console.log(t.response)})):console.log("cancelled")}))},goToCashier:function(t){this.$router.push({name:"Cashier",params:{row:t}})}}},c=s,l=o("2877"),u=Object(l["a"])(c,n,r,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0af432.051ffca8.js.map